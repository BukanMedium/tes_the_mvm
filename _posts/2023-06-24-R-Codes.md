---
layout: post
read_time: true
show_date: true
title: R Codes
date: 2023-06-24 07:00:00 +0700
description: RRRRRrrrrrrrrrrrrrrrrrrrr.
img: posts/20230624/RCOdes.png 
tags: [tutorial, references]
author: Shulhan
github: 
---

### Calculating Current Magnitude and Direction
Asumsi:  
Data yang digunakan berformat tif, dan format nama file tifnya "u_angka bulan.tif" contoh "u_12.tif".  
Dalam menghitung arah harus ada komponen U dan V.   
  
  

``
library(raster)

# Set the path to the directory containing u and v TIF files
u_directory <- "D:/tes u v/u"
v_directory <- "D:/tes u v/v"

# Create empty lists to store monthly magnitude and direction
monthly_magnitude_list <- list()
monthly_direction_list <- list()

# Loop over the months
for (month in 1:96) {
  # Read u and v files for the current month
  u_file <- paste0(u_directory, "/u_", month, ".tif")
  v_file <- paste0(v_directory, "/v__", month, ".tif")
  u_raster <- raster(u_file)
  v_raster <- raster(v_file)
  
  # Calculate magnitude for the current month
  magnitude <- sqrt(u_raster^2 + v_raster^2)
  
  # Calculate direction for the current month
  direction <- atan2(v_raster, u_raster)
  
  # Store monthly magnitude and direction
  monthly_magnitude_list[[month]] <- magnitude
  monthly_direction_list[[month]] <- direction
}

# Save monthly magnitude and direction to new TIF files
for (month in 1:96) {
  # Get the year and month for the current file
  year <- 2008 + (month - 1) %/% 12
  month_number <- (month - 1) %% 12 + 1
  
  # Create a formatted string for the month
  month_string <- sprintf("%02d", month_number)
  
  # Construct the output file names
  magnitude_file <- paste0("D:/tes u v/magnitude_", year, month_string, ".tif")
  direction_file <- paste0("D:/tes u v/direction_", year, month_string, ".tif")
  
  # Write monthly magnitude and direction to new TIF files
  writeRaster(monthly_magnitude_list[[month]], magnitude_file, format = "GTiff", overwrite = TRUE)
  writeRaster(monthly_direction_list[[month]], direction_file, format = "GTiff", overwrite = TRUE)
}

``
